
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>OpenLayers routing map &#8212; Open Source Routing Library</title>
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    

  </head>
  <body>
    <div class="header">
        <div class="wrap">
            <h1 id="logo"><a href="../../index.html">pgRouting</a></h1>
            <ul id="top-nav">
                <li class="first"><a href="../../index.html">Home</a></li>
                <li><a href="../../documentation.html">Documentation</a></li>
                <li><a href="../../download.html">Download</a></li>
                <li><a href="../../support.html">Support</a></li>
                <li><a href="../../development.html">Development</a></li>
            </ul>

            <div id="searchbox">
                <form class="search" action="../../search.html" method="get">
                    <input id="searchbox-query" type="text" name="q" size="25" value="Search &hellip;" tabindex="3" onblur="if(this.value=='') this.value='Search &hellip;';" onfocus="if(this.value=='Search &hellip;') this.value='';" />
                    <input id="searchbox-submit" type="image" value="Search" src="../../_static/img/search_icon_green.png" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
            </div>
        </div>
    </div>

    	
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="../../index.html">Home</a> &#187;</li>
        <li><a href="#">OpenLayers routing map</a></li>
      </ul>
    </div>
    

    	
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">OpenLayers routing map</a><ul>
<li><a class="reference internal" href="#starting-page-00-index-html">Starting page (00.index.html)</a></li>
<li><a class="reference internal" href="#design-basic-map-layers-01-index-html">Design basic map layers (01.index.html)</a></li>
<li><a class="reference internal" href="#create-a-vector-layer-and-draw-a-polygon-on-it-02-index-html">Create a Vector layer and draw a polygon on it (02.index.html)</a></li>
<li><a class="reference internal" href="#set-start-end-point-tool-03-index-html">“set start/end point” tool (03.index.html)</a></li>
<li><a class="reference internal" href="#customize-the-tools-04-index-html">Customize the tools (04.index.html)</a></li>
<li><a class="reference internal" href="#ask-for-a-route-05-index-html">Ask for a route (05.index.html)</a></li>
<li><a class="reference internal" href="#show-the-routing-result-on-the-map-06-index-html">Show the routing result on the map (06.index.html)</a></li>
</ul>
</li>
</ul>

    
    <h2>Make a Donation</h2>
    <p>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
			<input type="hidden" name="cmd" value="_s-xclick">
			<input type="hidden" name="hosted_button_id" value="K6GT9CC2ZPTDG">
			<input type="hidden" name="business" value="donate@pgrouting.org">
			<input type="hidden" name="notify_url" value="http://www.pgrouting.org">
			<input type="hidden" name="item_name" value="Donation for pgRouting Project">
			<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" style="border:none;">
			<select name="currency_code" class="paypal_currency">
				<option value="EUR" title="€" selected="">EUR</option>
				<option value="AUD" title="$">AUD</option>
				<option value="GBP" title="£">GBP</option>
				<option value="JPY" title="¥">JPY</option>
				<option value="CAD" title="$">CAD</option>
				<option value="CHF" title="">CHF</option>
				<option value="USD" title="$">USD</option>
			</select>
			<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
			<br/> <a href="../../donate.html">Read more</a>
		</form>
    </p>
    <h2>Links</h2>
    <ul style="list-style: square; margin-left: 20px;">
        <li><a href="http://workshop.pgrouting.org/">pgRouting Workshop</a></li>
    	<li><a href="http://www.postgresql.org/">PostgreSQL</a></li>
    	<li><a href="http://www.postgis.net/">PostGIS</a></li>
    </ul>

    <!-- Callout -->
    <div class="callout-sidebar">

        <a href="http://2018.foss4g.org">
        <img src="../../_static/img/foss4g_2018.png"
            alt="FOSS4G 2018, Dar es Salaam" title="FOSS4G 2018, Dar es Salaam" style="width:120px;"/>
        </a>

        <a href="https://europe.foss4g.org/2018">
          <img src="../../_static/img/foss4ge_2018.png"
              alt="FOSS4G Europe 2015, Como" title="FOSS4G Europe 2018" style="width:120px;"/>
        </a>

        <a href="http://www.foss4g-asia.org/2018">
          <img src="../../_static/img/foss4gasia_2018.png"
              alt="FOSS4G Europe 2015, Como" title="FOSS4G Asia 2018" style="width:120px;"/>
        </a>

        <a href="http://locatepress.com/pgrouting">
          <img src="../../_static/img/book_fullsize.png"
              alt="pgROUTING a practical guide" title="pgROUTING a practical guide" style="height:100px;"/>
        </a>

        <a href="http://www.osgeo.org">
          <img src="../../_static/img/OSGeo_logo.png"
        	alt="OSGeo Foundation" title="OSGeo Foundation" style="width:210px;"/>
        </a>
    </div>

        </div>
      </div>
    


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="openlayers-routing-map">
<span id="foss4g2007-ch03"></span><h1>OpenLayers routing map<a class="headerlink" href="#openlayers-routing-map" title="Permalink to this headline">¶</a></h1>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The content of this page is outdated and is for archiving purposes only.</p>
</div>
<ul class="simple">
<li>Open text editor (i.e. Gedit, Mousepad)</li>
<li>Google key: you don’t need a valid key if you’re working on localhost</li>
<li>Note: these examples are not compatible with the  latest stable version of OpenLayers (version 2.5). If you want to update the code, please look at: <a class="reference external" href="http://trac.openlayers.org/wiki/SphericalMercator">http://trac.openlayers.org/wiki/SphericalMercator</a></li>
</ul>
<div class="section" id="starting-page-00-index-html">
<h2>Starting page (00.index.html)<a class="headerlink" href="#starting-page-00-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Create a basic html:</li>
<li>include OpenLayers and Google maps API javascript files</li>
<li>create an empty div to receive the OpenLayers map</li>
<li>create an empty init function. The function will be called on page load (see onload in the body tag)</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="design-basic-map-layers-01-index-html">
<h2>Design basic map layers (01.index.html)<a class="headerlink" href="#design-basic-map-layers-01-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Create an OpenLayers map object</li>
<li>Create and Controls to the maps (layer switcher and mouse position)</li>
<li>Create a Google Satellite layer and add it to the map</li>
<li>Recenter the map to a specified extent</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="c1">// global variables</span>
            <span class="kd">var</span> <span class="nx">map</span><span class="p">;</span>

            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">projection</span><span class="o">:</span> <span class="s2">&quot;EPSG: 54004&quot;</span><span class="p">,</span>
                                                 <span class="nx">units</span><span class="o">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
                                                 <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">156543.0339</span><span class="p">,</span>
                                                 <span class="nx">maxExtent</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="o">-</span><span class="mi">136554022</span><span class="p">,</span>
                                                                                  <span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="mi">136554022</span><span class="p">)</span>
                                                <span class="p">});</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">MousePosition</span><span class="p">());</span>

                <span class="c1">// create and add layers to the map</span>
                <span class="kd">var</span> <span class="nx">satellite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">GoogleMercator</span><span class="p">(</span><span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
                                                                    <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">G_NORMAL_MAP</span><span class="p">});</span>

                <span class="nx">map</span><span class="p">.</span><span class="nx">addLayers</span><span class="p">([</span><span class="nx">satellite</span><span class="p">]);</span>

                <span class="c1">// set default position</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">zoomToExtent</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">13737893</span><span class="p">,</span>
                                                       <span class="mi">6141906</span><span class="p">,</span>
                                                       <span class="o">-</span><span class="mi">13728396</span><span class="p">,</span>
                                                       <span class="mi">6151394</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-vector-layer-and-draw-a-polygon-on-it-02-index-html">
<h2>Create a Vector layer and draw a polygon on it (02.index.html)<a class="headerlink" href="#create-a-vector-layer-and-draw-a-polygon-on-it-02-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Create a custom style for the vector layer</li>
<li>Create a Vector layer and add it to the map</li>
<li>Create a WKT parser and read a polygon, this create an OpenLayers.Geometry.Polygon object</li>
<li>Create a OpenLayers.Feature.Vector with the polygon and add it to the vector layer</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
             <span class="kd">var</span> <span class="nx">result_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                 <span class="nx">strokeWidth</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="nx">strokeColor</span><span class="o">:</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
                 <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mi">0</span>
             <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="c1">// global variables</span>
            <span class="kd">var</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">;</span>

            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">projection</span><span class="o">:</span> <span class="s2">&quot;EPSG: 54004&quot;</span><span class="p">,</span>
                                                 <span class="nx">units</span><span class="o">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
                                                 <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">156543.0339</span><span class="p">,</span>
                                                 <span class="nx">maxExtent</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="o">-</span><span class="mi">136554022</span><span class="p">,</span>
                                                                                  <span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="mi">136554022</span><span class="p">)</span>
                                                <span class="p">});</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">MousePosition</span><span class="p">());</span>

                <span class="c1">// create and add layers to the map</span>
                <span class="kd">var</span> <span class="nx">satellite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">GoogleMercator</span><span class="p">(</span><span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
                                                                    <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">G_NORMAL_MAP</span><span class="p">});</span>
                <span class="nx">downtown</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Downtown data area&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Routing results&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>

                <span class="nx">map</span><span class="p">.</span><span class="nx">addLayers</span><span class="p">([</span><span class="nx">satellite</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span> <span class="nx">result</span><span class="p">]);</span>

                <span class="c1">// create a feature from a wkt string and add it to the map</span>
                <span class="nx">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Format</span><span class="p">.</span><span class="nx">WKT</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">wkt</span> <span class="o">=</span> <span class="s2">&quot;POLYGON((-13737893 6151394, -13737893 6141906, -13728396 6141906, -13728396 6151394, -13737893 6151394))&quot;</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">wkt</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">feature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
                <span class="nx">downtown</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">feature</span><span class="p">]);</span>

                <span class="c1">// set default position</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">zoomToExtent</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">13737893</span><span class="p">,</span>
                                                       <span class="mi">6141906</span><span class="p">,</span>
                                                       <span class="o">-</span><span class="mi">13728396</span><span class="p">,</span>
                                                       <span class="mi">6151394</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="set-start-end-point-tool-03-index-html">
<h2>“set start/end point” tool (03.index.html)<a class="headerlink" href="#set-start-end-point-tool-03-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Create two more vector layers with custom style</li>
<li>Create the two drawing tools (OpenLayers.Control.!DrawFeature), those tools can only draw point  (OpenLayers.Handler.Point)</li>
<li>The toggleControl function set the active tool</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

            <span class="kd">var</span> <span class="nx">start_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;start.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="kd">var</span> <span class="nx">stop_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;stop.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

             <span class="kd">var</span> <span class="nx">result_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                 <span class="nx">strokeWidth</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="nx">strokeColor</span><span class="o">:</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
                 <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mi">0</span>
             <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="c1">// global variables</span>
            <span class="kd">var</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">controls</span><span class="p">;</span>

            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">projection</span><span class="o">:</span> <span class="s2">&quot;EPSG: 54004&quot;</span><span class="p">,</span>
                                                 <span class="nx">units</span><span class="o">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
                                                 <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">156543.0339</span><span class="p">,</span>
                                                 <span class="nx">maxExtent</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="o">-</span><span class="mi">136554022</span><span class="p">,</span>
                                                                                  <span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="mi">136554022</span><span class="p">)</span>
                                                <span class="p">});</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">MousePosition</span><span class="p">());</span>

                <span class="c1">// create and add layers to the map</span>
                <span class="kd">var</span> <span class="nx">satellite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">GoogleMercator</span><span class="p">(</span><span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
                                                                    <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">G_NORMAL_MAP</span><span class="p">});</span>
                <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Start point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">start_style</span><span class="p">});</span>
                <span class="nx">stop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;End point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">stop_style</span><span class="p">});</span>
                <span class="nx">downtown</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Downtown data area&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Routing results&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>

                <span class="nx">map</span><span class="p">.</span><span class="nx">addLayers</span><span class="p">([</span><span class="nx">satellite</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span><span class="nx">result</span><span class="p">]);</span>

                <span class="c1">// create a feature from a wkt string and add it to the map</span>
                <span class="nx">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Format</span><span class="p">.</span><span class="nx">WKT</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">wkt</span> <span class="o">=</span> <span class="s2">&quot;POLYGON((-13737893 6151394, -13737893 6141906, -13728396 6141906, -13728396 6151394, -13737893 6151394))&quot;</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">wkt</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">feature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
                <span class="nx">downtown</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">feature</span><span class="p">]);</span>

                <span class="c1">// set default position</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">zoomToExtent</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">13737893</span><span class="p">,</span>
                                                       <span class="mi">6141906</span><span class="p">,</span>
                                                       <span class="o">-</span><span class="mi">13728396</span><span class="p">,</span>
                                                       <span class="mi">6151394</span><span class="p">));</span>

                <span class="c1">// controls</span>
                <span class="nx">controls</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">start</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">),</span>
                  <span class="nx">stop</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">stop</span><span class="p">,</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">toggleControl</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">key</span> <span class="o">&amp;&amp;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">activate</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">deactivate</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span><span class="p">&gt;</span>navigate<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;start&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span><span class="p">&gt;</span>set start point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;stop&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span><span class="p">&gt;</span>set stop point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="customize-the-tools-04-index-html">
<h2>Customize the tools (04.index.html)<a class="headerlink" href="#customize-the-tools-04-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Create a custom  OpenLayers.Handler.Point handle: !SinglePoint. This handler only draw one point on the layer</li>
<li>Add a method selector</li>
<li>Create the “compute” button with the callback function (empty for now)</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

            <span class="kd">var</span> <span class="nx">SinglePoint</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
            <span class="nx">SinglePoint</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Class</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">createFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">removeFeatures</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">features</span><span class="p">);</span>
                    <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">createFeature</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>

            <span class="kd">var</span> <span class="nx">start_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;start.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="kd">var</span> <span class="nx">stop_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;stop.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

             <span class="kd">var</span> <span class="nx">result_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                 <span class="nx">strokeWidth</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="nx">strokeColor</span><span class="o">:</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
                 <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mi">0</span>
             <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="c1">// global variables</span>
            <span class="kd">var</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">controls</span><span class="p">;</span>

            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">projection</span><span class="o">:</span> <span class="s2">&quot;EPSG: 54004&quot;</span><span class="p">,</span>
                                                 <span class="nx">units</span><span class="o">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
                                                 <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">156543.0339</span><span class="p">,</span>
                                                 <span class="nx">maxExtent</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="o">-</span><span class="mi">136554022</span><span class="p">,</span>
                                                                                  <span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="mi">136554022</span><span class="p">)</span>
                                                <span class="p">});</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">MousePosition</span><span class="p">());</span>

                <span class="c1">// create and add layers to the map</span>
                <span class="kd">var</span> <span class="nx">satellite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">GoogleMercator</span><span class="p">(</span><span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
                                                                    <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">G_NORMAL_MAP</span><span class="p">});</span>
                <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Start point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">start_style</span><span class="p">});</span>
                <span class="nx">stop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;End point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">stop_style</span><span class="p">});</span>
                <span class="nx">downtown</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Downtown data area&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Routing results&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>

                <span class="nx">map</span><span class="p">.</span><span class="nx">addLayers</span><span class="p">([</span><span class="nx">satellite</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span><span class="nx">result</span><span class="p">]);</span>

                <span class="c1">// create a feature from a wkt string and add it to the map</span>
                <span class="nx">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Format</span><span class="p">.</span><span class="nx">WKT</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">wkt</span> <span class="o">=</span> <span class="s2">&quot;POLYGON((-13737893 6151394, -13737893 6141906, -13728396 6141906, -13728396 6151394, -13737893 6151394))&quot;</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">wkt</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">feature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
                <span class="nx">downtown</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">feature</span><span class="p">]);</span>

                <span class="c1">// set default position</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">zoomToExtent</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">13737893</span><span class="p">,</span>
                                                       <span class="mi">6141906</span><span class="p">,</span>
                                                       <span class="o">-</span><span class="mi">13728396</span><span class="p">,</span>
                                                       <span class="mi">6151394</span><span class="p">));</span>

                <span class="c1">// controls</span>
                <span class="nx">controls</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">start</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">SinglePoint</span><span class="p">),</span>
                  <span class="nx">stop</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">stop</span><span class="p">,</span> <span class="nx">SinglePoint</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">toggleControl</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">key</span> <span class="o">&amp;&amp;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">activate</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">deactivate</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">compute</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span><span class="p">&gt;</span>navigate<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;start&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span><span class="p">&gt;</span>set start point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;stop&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span><span class="p">&gt;</span>set stop point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;method&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPD&quot;</span><span class="p">&gt;</span>Shortest Path Dijkstra - undirected (BBox)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPA&quot;</span><span class="p">&gt;</span>Shortest Path A Star - undirected<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPS&quot;</span><span class="p">&gt;</span>Shortest Path Shooting Star<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;compute()&quot;</span><span class="p">&gt;</span>Calculate Route<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ask-for-a-route-05-index-html">
<h2>Ask for a route (05.index.html)<a class="headerlink" href="#ask-for-a-route-05-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Code the compute function:</dt>
<dd><ul class="first last">
<li>Create a request object (result)</li>
<li>Use the OpenLayers !LoadUrl function to call the php script via AJAX</li>
<li>The displayRoute function will be called with the output of the php script</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

            <span class="kd">var</span> <span class="nx">SinglePoint</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
            <span class="nx">SinglePoint</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Class</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">createFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">removeFeatures</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">features</span><span class="p">);</span>
                    <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">createFeature</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>

            <span class="kd">var</span> <span class="nx">start_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;start.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="kd">var</span> <span class="nx">stop_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;stop.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

             <span class="kd">var</span> <span class="nx">result_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                 <span class="nx">strokeWidth</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="nx">strokeColor</span><span class="o">:</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
                 <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mi">0</span>
             <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="c1">// global variables</span>
            <span class="kd">var</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">controls</span><span class="p">;</span>

            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">projection</span><span class="o">:</span> <span class="s2">&quot;EPSG: 54004&quot;</span><span class="p">,</span>
                                                 <span class="nx">units</span><span class="o">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
                                                 <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">156543.0339</span><span class="p">,</span>
                                                 <span class="nx">maxExtent</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="o">-</span><span class="mi">136554022</span><span class="p">,</span>
                                                                                  <span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="mi">136554022</span><span class="p">)</span>
                                                <span class="p">});</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">MousePosition</span><span class="p">());</span>

                <span class="c1">// create and add layers to the map</span>
                <span class="kd">var</span> <span class="nx">satellite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">GoogleMercator</span><span class="p">(</span><span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
                                                                    <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">G_NORMAL_MAP</span><span class="p">});</span>
                <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Start point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">start_style</span><span class="p">});</span>
                <span class="nx">stop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;End point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">stop_style</span><span class="p">});</span>
                <span class="nx">downtown</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Downtown data area&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Routing results&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>

                <span class="nx">map</span><span class="p">.</span><span class="nx">addLayers</span><span class="p">([</span><span class="nx">satellite</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span><span class="nx">result</span><span class="p">]);</span>

                <span class="c1">// create a feature from a wkt string and add it to the map</span>
                <span class="nx">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Format</span><span class="p">.</span><span class="nx">WKT</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">wkt</span> <span class="o">=</span> <span class="s2">&quot;POLYGON((-13737893 6151394, -13737893 6141906, -13728396 6141906, -13728396 6151394, -13737893 6151394))&quot;</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">wkt</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">feature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
                <span class="nx">downtown</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">feature</span><span class="p">]);</span>

                <span class="c1">// set default position</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">zoomToExtent</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">13737893</span><span class="p">,</span>
                                                       <span class="mi">6141906</span><span class="p">,</span>
                                                       <span class="o">-</span><span class="mi">13728396</span><span class="p">,</span>
                                                       <span class="mi">6151394</span><span class="p">));</span>

                <span class="c1">// controls</span>
                <span class="nx">controls</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">start</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">SinglePoint</span><span class="p">),</span>
                  <span class="nx">stop</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">stop</span><span class="p">,</span> <span class="nx">SinglePoint</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">toggleControl</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">key</span> <span class="o">&amp;&amp;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">activate</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">deactivate</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">compute</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">startPoint</span> <span class="o">=</span> <span class="nx">start</span><span class="p">.</span><span class="nx">features</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="kd">var</span> <span class="nx">stopPoint</span> <span class="o">=</span> <span class="nx">stop</span><span class="p">.</span><span class="nx">features</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">startPoint</span> <span class="o">&amp;&amp;</span> <span class="nx">stopPoint</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="nx">startpoint</span><span class="o">:</span> <span class="nx">startPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">startPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                        <span class="nx">finalpoint</span><span class="o">:</span> <span class="nx">stopPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">stopPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                        <span class="nx">method</span><span class="o">:</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">getElement</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span>
                        <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;victoria&quot;</span><span class="p">,</span>
                        <span class="nx">srid</span><span class="o">:</span> <span class="s2">&quot;54004&quot;</span>
                    <span class="p">};</span>
                    <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">loadURL</span><span class="p">(</span><span class="s2">&quot;./ax_routing.php&quot;</span><span class="p">,</span>
                                       <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">getParameterString</span><span class="p">(</span><span class="nx">result</span><span class="p">),</span>
                                       <span class="kc">null</span><span class="p">,</span>
                                       <span class="nx">displayRoute</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">displayRoute</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">response</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span><span class="p">&gt;</span>navigate<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;start&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span><span class="p">&gt;</span>set start point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;stop&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span><span class="p">&gt;</span>set stop point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;method&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPD&quot;</span><span class="p">&gt;</span>Shortest Path Dijkstra - undirected (BBox)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPA&quot;</span><span class="p">&gt;</span>Shortest Path A Star - undirected<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPS&quot;</span><span class="p">&gt;</span>Shortest Path Shooting Star<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;compute()&quot;</span><span class="p">&gt;</span>Calculate Route<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="show-the-routing-result-on-the-map-06-index-html">
<h2>Show the routing result on the map (06.index.html)<a class="headerlink" href="#show-the-routing-result-on-the-map-06-index-html" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>code the displayRoute function:</dt>
<dd><ul class="first last">
<li>Erase the previous result</li>
<li>Get all the &lt;edge&gt; tag in the XML document</li>
<li>Parse the &lt;wkt&gt; content of each edge and add them to the result layer</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
            <span class="p">#</span><span class="nn">map</span> <span class="p">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">512</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">black</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./OpenLayers-google/lib/OpenLayers.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://maps.google.com/maps?file=api&amp;v=2&amp;key=foobar&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

            <span class="kd">var</span> <span class="nx">SinglePoint</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Class</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
            <span class="nx">SinglePoint</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Class</span><span class="p">.</span><span class="nx">inherit</span><span class="p">(</span><span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">createFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">removeFeatures</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">features</span><span class="p">);</span>
                    <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Handler</span><span class="p">.</span><span class="nx">Point</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">createFeature</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>

            <span class="kd">var</span> <span class="nx">start_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;start.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="kd">var</span> <span class="nx">stop_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                <span class="nx">externalGraphic</span><span class="o">:</span> <span class="s2">&quot;stop.png&quot;</span><span class="p">,</span>
                <span class="nx">graphicWidth</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">graphicHeight</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicYOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">26</span><span class="p">,</span>
                <span class="nx">graphicOpacity</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

             <span class="kd">var</span> <span class="nx">result_style</span> <span class="o">=</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">applyDefaults</span><span class="p">({</span>
                 <span class="nx">strokeWidth</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="nx">strokeColor</span><span class="o">:</span> <span class="s2">&quot;#ff0000&quot;</span><span class="p">,</span>
                 <span class="nx">fillOpacity</span><span class="o">:</span> <span class="mi">0</span>
             <span class="p">},</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]);</span>

            <span class="c1">// global variables</span>
            <span class="kd">var</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">controls</span><span class="p">;</span>

            <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">projection</span><span class="o">:</span> <span class="s2">&quot;EPSG: 54004&quot;</span><span class="p">,</span>
                                                 <span class="nx">units</span><span class="o">:</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span>
                                                 <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">156543.0339</span><span class="p">,</span>
                                                 <span class="nx">maxExtent</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="o">-</span><span class="mi">136554022</span><span class="p">,</span>
                                                                                  <span class="mi">20037508</span><span class="p">,</span>
                                                                                  <span class="mi">136554022</span><span class="p">)</span>
                                                <span class="p">});</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">MousePosition</span><span class="p">());</span>

                <span class="c1">// create and add layers to the map</span>
                <span class="kd">var</span> <span class="nx">satellite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">GoogleMercator</span><span class="p">(</span><span class="s2">&quot;Google Satellite&quot;</span><span class="p">,</span>
                                                                    <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">G_NORMAL_MAP</span><span class="p">});</span>
                <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Start point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">start_style</span><span class="p">});</span>
                <span class="nx">stop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;End point&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">stop_style</span><span class="p">});</span>
                <span class="nx">downtown</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Downtown data area&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="s2">&quot;Routing results&quot;</span><span class="p">,</span>
                                                     <span class="p">{</span><span class="nx">style</span><span class="o">:</span> <span class="nx">result_style</span><span class="p">});</span>

                <span class="nx">map</span><span class="p">.</span><span class="nx">addLayers</span><span class="p">([</span><span class="nx">satellite</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">downtown</span><span class="p">,</span><span class="nx">result</span><span class="p">]);</span>

                <span class="c1">// create a feature from a wkt string and add it to the map</span>
                <span class="nx">parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Format</span><span class="p">.</span><span class="nx">WKT</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">wkt</span> <span class="o">=</span> <span class="s2">&quot;POLYGON((-13737893 6151394, -13737893 6141906, -13728396 6141906, -13728396 6151394, -13737893 6151394))&quot;</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">wkt</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">feature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Feature</span><span class="p">.</span><span class="nx">Vector</span><span class="p">(</span><span class="nx">geometry</span><span class="p">);</span>
                <span class="nx">downtown</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">feature</span><span class="p">]);</span>

                <span class="c1">// set default position</span>
                <span class="nx">map</span><span class="p">.</span><span class="nx">zoomToExtent</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">13737893</span><span class="p">,</span>
                                                       <span class="mi">6141906</span><span class="p">,</span>
                                                       <span class="o">-</span><span class="mi">13728396</span><span class="p">,</span>
                                                       <span class="mi">6151394</span><span class="p">));</span>

                <span class="c1">// controls</span>
                <span class="nx">controls</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">start</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">SinglePoint</span><span class="p">),</span>
                  <span class="nx">stop</span><span class="o">:</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">DrawFeature</span><span class="p">(</span><span class="nx">stop</span><span class="p">,</span> <span class="nx">SinglePoint</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">toggleControl</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">controls</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">key</span> <span class="o">&amp;&amp;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">activate</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">controls</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">deactivate</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">compute</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">startPoint</span> <span class="o">=</span> <span class="nx">start</span><span class="p">.</span><span class="nx">features</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="kd">var</span> <span class="nx">stopPoint</span> <span class="o">=</span> <span class="nx">stop</span><span class="p">.</span><span class="nx">features</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">startPoint</span> <span class="o">&amp;&amp;</span> <span class="nx">stopPoint</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="nx">startpoint</span><span class="o">:</span> <span class="nx">startPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">startPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                        <span class="nx">finalpoint</span><span class="o">:</span> <span class="nx">stopPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">stopPoint</span><span class="p">.</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                        <span class="nx">method</span><span class="o">:</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">getElement</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span>
                        <span class="nx">region</span><span class="o">:</span> <span class="s2">&quot;victoria&quot;</span><span class="p">,</span>
                        <span class="nx">srid</span><span class="o">:</span> <span class="s2">&quot;54004&quot;</span>
                    <span class="p">};</span>
                    <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">loadURL</span><span class="p">(</span><span class="s2">&quot;./ax_routing.php&quot;</span><span class="p">,</span>
                                       <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">getParameterString</span><span class="p">(</span><span class="nx">result</span><span class="p">),</span>
                                       <span class="kc">null</span><span class="p">,</span>
                                       <span class="nx">displayRoute</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">displayRoute</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">response</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// erase the previous results</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">removeFeatures</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">features</span><span class="p">);</span>

                    <span class="c1">// parse the features</span>
                    <span class="kd">var</span> <span class="nx">edges</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;edge&#39;</span><span class="p">);</span>
                    <span class="kd">var</span> <span class="nx">features</span> <span class="o">=</span> <span class="p">[];</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">edges</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">edges</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;wkt&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">);</span>
                        <span class="nx">features</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">(</span><span class="nx">features</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;init()&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;noneToggle&quot;</span><span class="p">&gt;</span>navigate<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;start&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;startToggle&quot;</span><span class="p">&gt;</span>set start point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;control&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;stop&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span>
                   <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;toggleControl(this);&quot;</span> <span class="p">/&gt;</span>
            <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;stopToggle&quot;</span><span class="p">&gt;</span>set stop point<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;method&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPD&quot;</span><span class="p">&gt;</span>Shortest Path Dijkstra - undirected (BBox)<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPA&quot;</span><span class="p">&gt;</span>Shortest Path A Star - undirected<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;SPS&quot;</span><span class="p">&gt;</span>Shortest Path Shooting Star<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;compute()&quot;</span><span class="p">&gt;</span>Calculate Route<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="../../index.html">Home</a> &#187;</li>
        <li><a href="#">OpenLayers routing map</a></li>
      </ul>
    </div>

	<div class="footer">
      	&copy; Copyright, pgRouting Community<br/>
      	pgRouting website is hosted on <a href="https://github.com/pgRouting/website">Github</a> |
      	<script type="text/javascript">
      		document.write('<a href="mailto:' + new Array("project","pgrouting.org").join("@") + '">Contact administrators</a>');
      	</script>
    </div>

	<!-- Piwik -->
	<script type="text/javascript">
	var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.georepublic.net/" : "http://stats.georepublic.net/");
	document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
	</script><script type="text/javascript">
	try {
	var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 3);
	piwikTracker.trackPageView();
	piwikTracker.enableLinkTracking();
	} catch( err ) {}
	</script><noscript><p><img src="http://stats.georepublic.net/piwik.php?idsite=3" style="border:0" alt="" /></p></noscript>
	<!-- End Piwik Tag -->

  </body>
</html>